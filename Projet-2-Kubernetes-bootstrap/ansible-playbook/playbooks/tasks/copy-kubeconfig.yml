- name: Fetch admin.conf using slurp
  hosts: master1
  tasks:
    - name: Slurp admin.conf
      ansible.builtin.slurp:
        src: /etc/kubernetes/admin.conf
      register: kubeconfig

    - name: Write admin.conf locally
      delegate_to: localhost
      copy:
        dest: /tmp/admin.conf
        content: "{{ kubeconfig.content | b64decode }}"